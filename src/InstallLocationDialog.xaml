<Window x:Class="SkyrimDataInstaller.InstallLocationDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Select Install Location" Height="280" Width="650"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" Text="Select Installation Folder"
                   FontSize="18" FontWeight="Bold"
                   HorizontalAlignment="Center" Margin="0,0,0,20" />

        <!-- Install Path Selection -->
        <Grid Grid.Row="1" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBox x:Name="InstallPathTextBox" Grid.Column="0"
                     Margin="0,0,10,0" Padding="10,8"
                     VerticalContentAlignment="Center"
                     TextChanged="InstallPathTextBox_TextChanged">
                <TextBox.Style>
                    <Style TargetType="TextBox">
                        <Style.Triggers>
                            <Trigger Property="Text" Value="">
                                <Setter Property="Background">
                                    <Setter.Value>
                                        <VisualBrush AlignmentX="Left" AlignmentY="Center" Stretch="None"
                                                     TileMode="None">
                                            <VisualBrush.Visual>
                                                <TextBlock Text="Select data folder..."
                                                           Foreground="Gray"
                                                           FontStyle="Italic"
                                                           VerticalAlignment="Center"
                                                           HorizontalAlignment="Left"
                                                           Margin="10,0,0,0" />
                                            </VisualBrush.Visual>
                                        </VisualBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style>
            </TextBox>

            <Button x:Name="BrowseButton" Grid.Column="1"
                    Content="Browse" Padding="15,8"
                    Click="BrowseButton_Click" />
        </Grid>

        <!-- Timer and Progress -->
        <StackPanel Grid.Row="2" HorizontalAlignment="Center" Margin="0,5,0,5"
                    x:Name="TimerPanel" Visibility="Collapsed">
            <TextBlock x:Name="TimerTextBlock" Text="Estimated time remaining: --:--"
                       FontWeight="SemiBold" HorizontalAlignment="Center" Margin="0,0,0,5" />
            <ProgressBar x:Name="InstallProgressBar" Height="12" Width="300"
                         Minimum="0" Maximum="100" Value="0">
                <ProgressBar.Style>
                    <Style TargetType="ProgressBar">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ProgressBar">
                                    <Grid>
                                        <Border Background="#E0E0E0" CornerRadius="6" />
                                        <Border x:Name="PART_Track" Background="Transparent" CornerRadius="6" />
                                        <Border x:Name="PART_Indicator" Background="#007ACC" CornerRadius="6"
                                                HorizontalAlignment="Left">
                                            <Border.Style>
                                                <Style TargetType="Border">
                                                    <Setter Property="Background">
                                                        <Setter.Value>
                                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                                <GradientStop Color="#007ACC" Offset="0" />
                                                                <GradientStop Color="#40A9FF" Offset="0.5" />
                                                                <GradientStop Color="#007ACC" Offset="1" />
                                                            </LinearGradientBrush>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </Border.Style>
                                        </Border>
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ProgressBar.Style>
            </ProgressBar>
            <TextBlock x:Name="ProgressTextBlock" Text="0 / 0 files"
                       FontSize="11" Foreground="Gray" HorizontalAlignment="Center" Margin="0,3,0,0" />
        </StackPanel>

        <!-- Spacer -->
        <Grid Grid.Row="3" />

        <!-- Buttons -->
        <Grid Grid.Row="4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBlock x:Name="InstructionsTextBlock" Grid.Row="2"
                       Text="This folder will be used to install the found files"
                       FontStyle="Italic" HorizontalAlignment="Center" Margin="0,15,0,0"
                       TextWrapping="Wrap" MaxWidth="500" />

            <Button x:Name="InstallButton" Grid.Column="1"
                    Content="Install Files" Padding="20,10"
                    FontSize="14" FontWeight="Bold"
                    Background="#28A745" Foreground="White"
                    Click="InstallButton_Click"
                    IsEnabled="False"
                    Visibility="Visible"
                    Margin="0,0,10,0" />

            <Button x:Name="CancelButton" Grid.Column="2"
                    Content="Cancel" Padding="20,10"
                    FontSize="14"
                    Background="#6C757D" Foreground="White"
                    Click="CancelButton_Click" />
        </Grid>
    </Grid>
</Window>